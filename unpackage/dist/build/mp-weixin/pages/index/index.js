(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0e7d":function(e,t,n){"use strict";var i=n("18bf"),s=n.n(i);s.a},"18bf":function(e,t,n){},3233:function(e,t,n){"use strict";n.r(t);var i=n("892c"),s=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=s.a},"570b":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={uSwiper:function(){return n.e("uview-ui/components/u-swiper/u-swiper").then(n.bind(null,"af14"))}},s=function(){var e=this,t=e.$createElement;e._self._c},o=[]},"892c":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){n.e("components/share_img/share_img").then(function(){return resolve(n("502c"))}.bind(null,n)).catch(n.oe)},s={components:{shareImg:i},data:function(){return{swiper_list:[],projectList:[{title:"美团外卖红包",price:"48",number:"102",platform:"meituan",path:"/pages/meituan/meituan"},{title:"天天减6元,周周享五折",price:"6",number:"57",platform:"meituancard",path:"/pages/meituan/meituan"},{title:"饿了么外卖红包",price:"66",number:"237",platform:"ele",path:"/pages/ele/ele"},{title:"天天扫码活动",price:"10",number:"320",platform:"elecard",path:"/pages/ele/ele"}],lv_1_id:null,isshow_share:!1,ismtcard_show_share:!1,iselecard_show_share:!1,mtcard_img:"https://cps.open-shop.cn/img/1622012673265.png",elecard_img:"https://cps.open-shop.cn/img/k7vXsdQxmI7zItg67rj6V1kSgyvkJJ.jpg",ewmImg:"",ad_list:[]}},computed:{userInfo:function(){return this.$store.state.userInfo},scene:function(){return this.$store.state.scene},appInfo:function(){return this.$store.state.appInfo&&this.$store.state.appInfo.app_name&&e.setNavigationBarTitle({title:this.$store.state.appInfo.app_name}),this.$store.state.appInfo}},onLoad:function(t){var n=this,i=e.getStorageSync("rodom_num");if(i){var s=JSON.parse(i);(new Date).getTime()-s.timestamp>36e5?this.assignment():(this.$set(this.projectList[1],"number",s.meituan_num),this.$set(this.projectList[2],"number",s.ele_num)),console.log("assig",s,(new Date).getTime())}else this.assignment();e.$once("binduser",(function(){if(0==n.userInfo.lv_1_id){if(Object.keys(t).length>0){if(t.scene){var e=JSON.parse(n.$decode(decodeURIComponent(t.scene)));n.lv_1_id=e.lv_1_id,console.log("扫描二维码初始加载",n.lv_1_id)}t.lv_1_id&&(n.lv_1_id=t.lv_1_id,console.log("分享卡片初始加载",n.lv_1_id))}else{var i=wx.getLaunchOptionsSync();n.lv_1_id=-1*i.scene,console.log("不通过分享初始加载",n.lv_1_id)}n.$http.user.bindPromoter({lv_1_id:n.lv_1_id}).then((function(e){console.log("绑定",e)}))}})),this.getwxqrcode(),this.getAdlist(),this.getBannerlist()},onShow:function(){this.$store.commit("setele_currentid",0),this.$store.commit("setmeituan_currentid",0)},onShareAppMessage:function(e){if("button"===e.from&&console.log(e.target),this.userInfo&&this.userInfo.id){var t=this.userInfo.id;return{title:this.appInfo.share_title,path:"/pages/index/index?lv_1_id=".concat(t)}}return{title:this.appInfo.share_title,path:"/pages/index/index"}},onShareTimeline:function(e){if("button"===e.from&&console.log(e.target),this.userInfo&&this.userInfo.id){var t=this.userInfo.id;return{title:this.appInfo.share_title,path:"/pages/index/index?lv_1_id=".concat(t)}}return{title:this.appInfo.share_title,path:"/pages/index/index"}},methods:{jump:function(t,n){console.log("item",t),"meituancard"!=t.platform?"elecard"!=t.platform?(console.log("currenid",n),n?(console.log("真"),"ele"==t.platform?this.$store.commit("setele_currentid",n):this.$store.commit("setmeituan_currentid",n)):(console.log("假"),"ele"==t.platform?this.$store.commit("setele_currentid",0):this.$store.commit("setmeituan_currentid",0)),e.switchTab({url:t.path})):this.elecard_show_share():this.mtcard_show_share()},webview:function(t){e.reLaunch({url:"url/url?url="+t})},share_img_click:function(){this.isshow_share=!0},mtcard_show_share:function(){this.ismtcard_show_share=!0},elecard_show_share:function(){this.iselecard_show_share=!0},clooseShare:function(){this.isshow_share=!1,this.ismtcard_show_share=!1,this.iselecard_show_share=!1},getwxqrcode:function(){var t=this,n=e.getStorageSync("token");if(!n)return clearTimeout(t.ewmtimer),void(this.ewmtimer=setTimeout((function(){console.log("请求二维码"),t.getwxqrcode()}),500));this.$http.user.getwxqrcode().then((function(e){console.log("生成的二维码",e.data.img),t.ewmImg=e.data.img}))},getBannerlist:function(){var e=this;e.$http.index.getBannerlist().then((function(t){console.log("请求banner成功",t),e.swiper_list=t.data})).catch((function(e){console.log("请求失败",e)}))},getAdlist:function(){var e=this;e.$http.index.getAdlist().then((function(t){console.log("请求ad成功",t),e.ad_list=t.data})).catch((function(e){console.log("请求失败",e)}))},assignment:function(){var t={meituan_num:this.random_number(100,500),ele_num:this.random_number(100,500),timestamp:(new Date).getTime()};this.$set(this.projectList[1],"number",t.meituan_num),this.$set(this.projectList[2],"number",t.ele_num),e.setStorageSync("rodom_num",JSON.stringify(t)),console.log("rodom_num",t)},random_number:function(e,t){var n=t-e,i=Math.random();return(e+n*i).toFixed(0)},showText:function(e,t){return null==e?"":e.length>t?e.substring(0,t-1)+"...":e}}};t.default=s}).call(this,n("543d")["default"])},e484:function(e,t,n){"use strict";n.r(t);var i=n("570b"),s=n("3233");for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o);n("0e7d");var r,a=n("f0c5"),c=Object(a["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=c.exports},ec40:function(e,t,n){"use strict";(function(e){n("8e1f");i(n("66fd"));var t=i(n("e484"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])}},[["ec40","common/runtime","common/vendor"]]]);